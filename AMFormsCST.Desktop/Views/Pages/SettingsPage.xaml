<Page
    x:Class="AMFormsCST.Desktop.Views.Pages.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:AMFormsCST.Desktop.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:AMFormsCST.Desktop.Views.Pages"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:viewmodels="clr-namespace:AMFormsCST.Desktop.ViewModels.Pages"
    Title="SettingsPage"
    d:DataContext="{d:DesignInstance viewmodels:SettingsViewModel,
                                     IsDesignTimeCreatable=False}"
    d:DesignHeight="600"
    d:DesignWidth="800"
    mc:Ignorable="d">
    <Page.Resources>
        <converters:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
    </Page.Resources>
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">

            <!--  Personalization Section  -->
            <ui:CardControl Margin="0,0,0,10" Header="Personalization">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,12"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="Customize the look and feel of the application." />

                    <TextBlock FontWeight="Medium" Text="Application Theme" />
                    <RadioButton
                        Margin="0,4,0,0"
                        Content="Light"
                        GroupName="theme"
                        IsChecked="{Binding CurrentTheme, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Light}" />
                    <RadioButton
                        Margin="0,4,0,0"
                        Content="Dark"
                        GroupName="theme"
                        IsChecked="{Binding CurrentTheme, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Dark}" />

                    <ui:ToggleSwitch
                        Margin="0,12,0,0"
                        Content="Always on Top"
                        IsChecked="{Binding AlwaysOnTop, Mode=TwoWay}" />
                </StackPanel>
            </ui:CardControl>

            <!--  Behavior Section  -->
            <ui:CardControl Margin="0,0,0,10" Header="Behavior">
                <StackPanel>
                    <ui:ToggleSwitch
                        Content="Automatically select new templates"
                        IsChecked="{Binding SelectNewTemplate, Mode=TwoWay}"
                        Margin="0,0,0,12" />

                    <ui:ToggleSwitch
                        Content="Capitalize form code in notes"
                        IsChecked="{Binding CapitalizeFormCode, Mode=TwoWay}"
                        Margin="0,0,0,12" />

                    <TextBlock Text="Phone Extension Separator" />
                    <ui:TextBox
                        Margin="0,4,0,0"
                        PlaceholderText="e.g., x"
                        Text="{Binding ExtSeparator, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </StackPanel>
            </ui:CardControl>

            <!--  About Section  -->
            <ui:CardControl Header="About">
                <StackPanel>
                    <TextBlock
                        Margin="0,0,0,12"
                        Foreground="{DynamicResource TextFillColorSecondaryBrush}"
                        Text="{Binding AppVersion}" />

                    <ui:Button
                        Command="{Binding CheckForUpdatesCommand}"
                        Appearance="Primary"
                        Content="Check for updates"
                        Icon="{ui:SymbolIcon ArrowDownload24}" />
                </StackPanel>
            </ui:CardControl>

        </StackPanel>
    </ScrollViewer>
</Page>